<h1>Products</h1>

<%= link_to "Nuevo Producto", new_product_path, class: "btn btn-primary btn-lg" %>


<div class="col-sm-3">
  <%= form_tag products_path, method: :get do %>
    <div class="form-group">
      <%= select_tag :category_id, options_from_collection_for_select(Category.all, "id", "name", params[:category_id]), prompt: "Categoría", class: "form-control" %>
    </div>
    <div class="form-group">
      <%= select_tag :purchase_id, options_from_collection_for_select(Purchase.all, "id", "name_purchases", params[:purchase_id]), prompt: "Purchase", class: "form-control" %>
    </div>
    <div class="form-group">
      <%= text_field_tag 'search[date_from]', @search.date_from %>
      <%= text_field_tag 'search[date_to]', @search.date_to %>
    </div>
    <%= submit_tag "Buscar", name: nil, class: "btn btn-primary btn-md" %>
  <% end %>
</div>



<table class="table table-hover">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Precio</th>
      <th>Categorías</th>
      <th>Purchases</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.name %></td>
        <td><%= product.price %></td>
        <td><%= Category.find_by(id: product.category_id).name %></td>
        <td><%= Purchase.find_by(id: product.purchase_id).name_purchases %></td>
        <td><%= product.date_product.strftime('%B, %d') %></td>
        <td>
          <%= link_to 'Editar', edit_product_path(product), class: "btn btn-primary btn-sm" %>
          <%= link_to 'Eliminar', product_path(product), class: "btn btn-primary btn-sm", method: :delete %>
        </td>
      </tr>
    <% end %>
  </tbody>
